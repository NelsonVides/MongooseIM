<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../favicon.ico">
  
  <title>ACL - MongooseIM</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../custom.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "ACL";
    var mkdocs_page_input_path = "advanced-configuration/acl.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> MongooseIM</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">User guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Get-to-know-MongooseIM/">ABCs of MongooseIM</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/MongooseIM-High-level-Architecture/">High-level Architecture</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Features-and-supported-standards/">Features and supported standards</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Getting-started/">Getting started</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/release_config/">Release/Installation configuration</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tutorials</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/How-to-build/">How to Build MongooseIM from source code</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Push-notifications/">How to Set up MongoosePush</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/ICE_tutorial/">How to Set up MongooseICE</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/iOS_tutorial/">How to Build an iOS messaging app</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Jingle-SIP-setup/">How to Set up Jingle/SIP</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Migration Guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../migrations/3.1.1_3.2.0/">3.1.1 to 3.2.0</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Platform</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../Roadmap/">Roadmap</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../Contributions/">Contributions to ecosystem</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../Differentiators/">Differentiators</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../History/">History</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Configuration</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../../Basic-configuration/">Basic Configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../Advanced-configuration/">Advanced Configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../database-backends-configuration/">Database backends configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../outgoing-connections/">Outgoing connections</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Modules/">Extension Modules</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Listener-modules/">Listener Modules</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">ACL</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#patterns">Patterns</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#all">all</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#user-username">{user, username()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#user-username-server">{user, username(), server()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#server-server">{server, server()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#resource-resource">{resource, resource()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#user_regexp-username_regexp">{user_regexp, username_regexp()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#user_regexp-username_regexp-server">{user_regexp, username_regexp(), server()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#server_regexp-server_regexp">{server_regexp, server_regexp()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#resource_regexp-resource_regexp">{resource_regexp, resource_regexp()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#node_regexp-username_regexp-server_regexp">{node_regexp, username_regexp(), server_regexp()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#user_glob-username_glob">{user_glob, username_glob()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#user_glob-username_glob-server">{user_glob, username_glob(), server()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#server_glob-server_glob">{server_glob, server_glob()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#resource_glob-resource_glob">{resource_glob, resource_glob()}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#node_glob-username_glob-server_glob">{node_glob, username_glob(), server_glob()}</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Services/">Services</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Authentication methods</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-methods/client-certificate/">Client Certificate</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Authentication backends</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-backends/External-authentication-module/">External Authentication Module</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-backends/HTTP-authentication-module/">HTTP Authentication Module</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-backends/JWT-authentication-module/">JWT Authentication Module</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-backends/LDAP-authentication-module/">LDAP Authentication Module</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-backends/PKI-authentication-module/">PKI Authentication Module</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">MongooseIM open XMPP extensions</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../open-extensions/muc_light/">MUC light</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../open-extensions/token-reconnection/">Token-based reconnection</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">REST API</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../rest-api/Client-frontend/">Client/frontend</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../rest-api/Metrics-backend/">Metrics backend</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../rest-api/Administration-backend/">Administration backend</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Operation and maintenance</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Cluster-management-considerations/">Cluster management considerations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Cluster-configuration-and-node-management/">Cluster configuration and node management</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Logging-%26-monitoring/">Logging & monitoring</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Reloading-configuration-on-a-running-system/">Reloading configuration on a running system</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Mongoose-metrics/">Metrics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/tls-distribution/">Distribution over TLS</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Developer's guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/Testing-MongooseIM/">Testing MongooseIM</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/logging/">Logging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/Hooks-and-handlers/">Hooks and Handlers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/hooks_description/">Hooks description</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/message_routing/">Stanza routing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/accumulators/">Accumulators</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/flat_options/">Flat options format</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/Moving-to-single-app-project-structure/">Moving to single app project structure</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/mod_amp_developers_guide/">mod_amp development</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/mod_muc_light_developers_guide/">mod_muc_light developers doc</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/SCRAM-serialization/">SCRAM serialization format</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/xep_tool/">xep-tool usage</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/OpenSSL-and-FIPS/">FIPS mode</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/Basic-iq-handler/">Basic IQ Handler</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/mongoose_wpool/">mongoose_wpool</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Module index</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_adhoc/">mod_adhoc</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_amp/">mod_amp</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_auth_token/">mod_auth_token</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_blocking/">mod_blocking</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_bosh/">mod_bosh</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_caps/">mod_caps</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_carboncopy/">mod_carboncopy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_commands/">mod_commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_csi/">mod_csi</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_inbox/">mod_inbox</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_disco/">mod_disco</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_global_distrib/">mod_global_distrib</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">mod_event_pusher</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher/">mod_event_pusher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher_http/">HTTP backend</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher_push/">Push backend</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher_sns/">SNS backend</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_http_upload/">mod_http_upload</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_jingle_sip/">mod_jingle_sip</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_keystore/">mod_keystore</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_last/">mod_last</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_mam/">mod_mam</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc/">mod_muc</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_commands/">mod_muc_commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_log/">mod_muc_log</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_light/">mod_muc_light</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_light_commands/">mod_muc_light_commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_offline/">mod_offline</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_offline_stub/">mod_offline_stub</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_ping/">mod_ping</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_privacy/">mod_privacy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_private/">mod_private</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_pubsub/">mod_pubsub</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_push_service_mongoosepush/">mod_push_service_mongoosepush</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_register/">mod_register</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_revproxy/">mod_revproxy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_roster/">mod_roster</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_shared_roster_ldap/">mod_shared_roster_ldap</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_sic/">mod_sic</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_stream_management/">mod_stream_management</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_time/">mod_time</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_vcard/">mod_vcard</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_version/">mod_version</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">MongooseIM</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Configuration &raquo;</li>
        
      
    
    <li>ACL</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>In MongooseIM access control is performed via Access Control Lists (ACL).
Initially, this functionality was supposed to answer the following question: "Is a given user allowed to access a particular resource?".
The answer was either <code>allow</code> or <code>deny</code>, but this functionality was extended to return any value.
For instance, we can ask how many concurrent session a given user can open, where the answer may vary depending on user affiliation - are they an admin or a normal user.</p>
<p>The functionality is defined via two top-level options:</p>
<ul>
<li><code>{acl, Name, Pattern}</code>: contrary to its name, it defines a user or the whole group.
 For instance we can define admin users or banned users.</li>
<li><code>{access, Name, List}</code>: an ACL that has a name and list of rules and values returned by them in the case of a successfull match.</li>
</ul>
<h1 id="acl-tuple">ACL tuple</h1>
<p><code>{acl, Name, Pattern}</code>: the name could be any atom.
 This name will be used in the access definitions.
 Note that there might be many ACL entries with the same name, in this case the result will be the union of all patterns.</p>
<h3 id="patterns">Patterns</h3>
<p>This sections describes all possible ACL patterns.
Some of them use the <code>re</code> syntax for regular expressions and some accept the <code>glob</code> syntax.</p>
<ul>
<li><a href="http://erlang.org/doc/man/re.html#id253353"><code>re</code> definitions</a></li>
<li><a href="https://en.wikipedia.org/wiki/Glob_(programming)"><code>glob</code> definitions</a></li>
</ul>
<p>Patterns can be defined in one of the following formats:</p>
<h4 id="all"><strong>all</strong></h4>
<p>All users/JIDs match.</p>
<h4 id="user-username"><strong>{user, username()}</strong></h4>
<p>All users with a given user name: <br/>
<code>{user, "admin"}</code>: includes <code>admin@localhost</code>, <code>admin@xmpp.org</code>, etc.</p>
<h4 id="user-username-server"><strong>{user, username(), server()}</strong></h4>
<p>In this case the username and the domain have to match:<br/>
<code>{user, "admin", "localhost"}</code>: <code>admin@localhost</code> matches, but<code>admin@xmpp.org</code> doesn't.</p>
<h4 id="server-server"><strong>{server, server()}</strong></h4>
<p>All users from a given domain:<br/>
<code>{server, "localhost"}</code>: <code>admin@localhost</code> and <code>pawel@localhost</code> match, but <code>pawel@xmpp.org</code> doesn't.</p>
<h4 id="resource-resource"><strong>{resource, resource()}</strong></h4>
<p>All users with a matching resource:<br/>
<code>{resource, "res1"}</code>: <code>admin@localhost/res1</code> matches, but <code>admin@localhost/res2</code> doesn't.</p>
<h4 id="user_regexp-username_regexp"><strong>{user_regexp, username_regexp()}</strong></h4>
<p>Similar to user, but the match is done against a regular expression:<br/>
<code>{user_regexp, "^ad.*"}</code>: <code>admin@localhost</code> and <code>ads@localhost2</code> match, but <code>pad@localhost</code> doesn't.</p>
<h4 id="user_regexp-username_regexp-server"><strong>{user_regexp, username_regexp(), server()}</strong></h4>
<p>Similar to user, the username is matched against regex, the server part has to be exactly the same:<br/>
<code>{user_regexp, "^ad.*", "localhost"}</code>: <code>admin@localhost</code> matches, but <code>admin@xmpp.org</code> doesn't.</p>
<h4 id="server_regexp-server_regexp"><strong>{server_regexp, server_regexp()}</strong></h4>
<p>Analogous to <code>user_regexp</code>, but regex matches on the server part of the JID:<br/>
<code>{server_regexp, "^local.*"}</code>: <code>admin@localhost</code> matches, but <code>admin@relocal</code> doesn't.</p>
<h4 id="resource_regexp-resource_regexp"><strong>{resource_regexp, resource_regexp()}</strong></h4>
<p>The same story as above, but for the resource part:<br/>
<code>{resource_regexp, "res.*"}</code>: <code>admin@localhost/resource</code> matches, but <code>admin@localhost/ios</code> doesn't.</p>
<h4 id="node_regexp-username_regexp-server_regexp"><strong>{node_regexp, username_regexp(), server_regexp()}</strong></h4>
<p>Regexp matching on both the username and the domain:<br/>
<code>{node_regexp, "ad.*", "loc.*"}</code>: <code>admin@localhost</code> matches, but <code>pawel@xmpp.org</code> doesn't.</p>
<h4 id="user_glob-username_glob"><strong>{user_glob, username_glob()}</strong></h4>
<p>Match on the username part using glob style patterns:<br/>
<code>{user_glob, "paw*"}</code>: <code>pawel@localhost</code> matches, but <code>admin@localhost</code> doesn't.</p>
<h4 id="user_glob-username_glob-server"><strong>{user_glob, username_glob(), server()}</strong></h4>
<p>Match on the username part using glob patterns and on the server using exact match:<br/>
<code>{user_glob, "paw*", "localhost"}</code>: <code>pawel@localhost</code> matches, but <code>pawel@xmpp.org</code> doesn't.</p>
<h4 id="server_glob-server_glob"><strong>{server_glob, server_glob()}</strong></h4>
<p>Match on the server part using glob patterns:<br/>
<code>{server_glob, "local*"}</code>: <code>pawel@localhost</code> matches, but <code>pawel@xmpp.org</code> doesn't.</p>
<h4 id="resource_glob-resource_glob"><strong>{resource_glob, resource_glob()}</strong></h4>
<p>Match on the resource part using glob patterns:<br/>
<code>{resource_glob, "r*"}</code>: <code>pawel@localhost/res</code> matches, but <code>pawel@xmpp.org</code> doesn't.</p>
<h4 id="node_glob-username_glob-server_glob"><strong>{node_glob, username_glob(), server_glob()}</strong></h4>
<p>Match on the username and the server part using glob patterns:<br/>
<code>{node_glob, "paw*", "loc*"}</code>: <code>pawel@localhost/res</code> matches, but <code>pawel@xmpp.org</code> doesn't.</p>
<h1 id="access-tuple">Access tuple</h1>
<p>Once we have our group of interest gathered in an ACL tuple, we can use them in an access control list.
To do so, we need to specify a tuple like the following:</p>
<p><code>{access, name_of_access_rule, [{value(), acl_name()}]}</code></p>
<p>As an example we can discuss 2 rules which are present in the default config file:</p>
<ul>
<li><code>{access, register, [{allow, all}]}</code>.<br/>
This rule is used while registering a new user.
The example above has no restrictions, but we might want to block certain JIDs, <code>admin</code> JID for instance.
To do so we need to set:<br/>
<code>{acl, admin, {user, "admin"}}.</code>, then <code>{access, register, [{deny, admin}, {allow, all}]}.</code></li>
<li><code>{access, max_user_offline_messages, [{5000, admin}, {100, all}]}</code>.<br/>
This rule is used in <code>mod_offline</code>, it determines <code>mod_offline</code>'s storage limit.
For users defined in the admin ACL (for example <code>{acl, admin, {user, "pawel", "localhost"}}</code>) the size is 5000 messages, while the size for a normal user is 10.</li>
</ul>
<h1 id="priority-global-vs-host-access-lists">Priority: global vs host access lists</h1>
<p>By default, both ACL and access elements are "global", so they apply to all domains available on the server.
However, using the <code>host_config</code> option, we are able to override the rules for a particular domain.</p>
<pre><code>%%  Define specific Access Rules in a virtual host.
{host_config, &quot;localhost&quot;,
 [
  {access, c2s, [{allow, admin}, {deny, all}]},
  {access, register, [{deny, all}]}
 ]
}.
</code></pre>
<p>The global rule has the highest priority, however if the global rule ends with <code>{allow, all}</code> the host specific rule is taken into account.</p>
<h1 id="for-developers">For developers</h1>
<p>To access the ACL functionality, one has to use the <code>acl:match_rule/3</code> function.</p>
<p>Given the following ACL:</p>
<p><code>{access, register, [{deny, all}]}</code></p>
<p>One can call:</p>
<p><code>acl:match_rule(&lt;&lt;"localhost"&gt;&gt;, register, jid:make(&lt;&lt;"p"&gt;&gt;, &lt;&lt;"localhost"&gt;&gt;, &lt;&lt;&gt;&gt;)).</code></p>
<p>Which in our case will return deny.
If the rule is not host specific, one can use <code>global</code> instead of <code>&lt;&lt;"localhost"&gt;&gt;</code>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Services/" class="btn btn-neutral float-right" title="Services">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Listener-modules/" class="btn btn-neutral" title="Listener Modules"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Listener-modules/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Services/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
