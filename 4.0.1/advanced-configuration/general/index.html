<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../favicon.ico">
  
  <title>Options: General - MongooseIM</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../custom.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Options: General";
    var mkdocs_page_input_path = "advanced-configuration/general.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> MongooseIM</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">User guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Get-to-know-MongooseIM/">ABCs of MongooseIM</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/MongooseIM-High-level-Architecture/">High-level Architecture</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Features-and-supported-standards/">Features and supported standards</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Getting-started/">Getting started</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/release_config/">Release/Installation configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Bootstrap-Scripts/">Bootstrap scripts</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/client-certificate/">Client certificate authentication</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tutorials</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/How-to-build/">How to Build MongooseIM from source code</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/push-notifications/Push-notifications/">How to Set up Push Notifications</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/push-notifications/Push-notifications-client-side/">How to Set up Push Notifications on the client side</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/push-notifications/With-MongoosePush/">How to Set up MongoosePush</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/ICE_tutorial/">How to Set up MongooseICE</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/iOS_tutorial/">How to Build an iOS messaging app</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Jingle-SIP-setup/">How to Set up Jingle/SIP</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Migration Guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../migrations/3.1.1_3.2.0/">3.1.1 to 3.2.0</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../migrations/3.3.0_3.4.0/">3.3.0 to 3.4.0</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../migrations/3.5.0_3.6.0/">3.5.0 to 3.6.0</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../migrations/3.6.0_3.7.0/">3.6.0 to 3.7.0</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../migrations/3.7.0_4.0.0/">3.7.0 to 4.0.0</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../migrations/4.0.0_4.0.1/">4.0.0 to 4.0.1</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../migrations/jid-from-mam-muc-script/">MAM MUC migration helper</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Platform</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../Contributions/">Contributions to ecosystem</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../Differentiators/">Differentiators</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../History/">History</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Configuration</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../../Advanced-configuration/">Configuration files</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Options: General</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#generalloglevel">general.loglevel</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#generalhosts">general.hosts</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#generallanguage">general.language</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../listen/">Options: Listen</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../auth/">Options: Auth</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../outgoing-connections/">Options: Outgoing connections</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Services/">Options: Services</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Modules/">Options: Extension Modules</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../shaper/">Options: Shaper</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../acl/">Options: Acl</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../access/">Options: Access</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../s2s/">Options: S2S</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../host_config/">Options: Host config</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../release-options/">Release options</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../Erlang-cookie-security/">Erlang Cookie Security</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../TLS-hardening/">TLS hardening</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../database-backends-configuration/">Database backends configuration</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Authentication methods</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-methods/rdbms/">RDBMS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-methods/external/">External</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-methods/anonymous/">Anonymous</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-methods/ldap/">LDAP</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-methods/jwt/">JWT</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-methods/riak/">Riak</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-methods/http/">HTTP</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-methods/pki/">PKI</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-methods/dummy/">Dummy</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">MongooseIM open XMPP extensions</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../open-extensions/muc_light/">MUC light</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../open-extensions/token-reconnection/">Token-based reconnection</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">REST API</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../rest-api/Client-frontend/">Client/frontend</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../rest-api/Metrics-backend/">Metrics backend</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../rest-api/Administration-backend/">Administration backend</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Operation and maintenance</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/gdpr-considerations/">GDPR considerations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Cluster-management-considerations/">Cluster management considerations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Cluster-configuration-and-node-management/">Cluster configuration and node management</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Logging-%26-monitoring/">Logging & monitoring</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Logging/">Logging configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Logging-fields/">Logging fields</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Reloading-configuration-on-a-running-system/">Reloading configuration on a running system</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Mongoose-metrics/">Metrics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/System-Metrics-Privacy-Policy/">System Metrics Privacy Policy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/tls-distribution/">Distribution over TLS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/known-issues/">Known issues</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Developer's guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/Testing-MongooseIM/">Testing MongooseIM</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/logging/">Logging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/Hooks-and-handlers/">Hooks and Handlers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/hooks_description/">Hooks description</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/message_routing/">Stanza routing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/accumulators/">Accumulators</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/flat_options/">Flat options format</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/Moving-to-single-app-project-structure/">Moving to single app project structure</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/mod_amp_developers_guide/">mod_amp development</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/mod_muc_light_developers_guide/">mod_muc_light developers doc</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/SCRAM-serialization/">SCRAM serialization format</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/xep_tool/">xep-tool usage</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/OpenSSL-and-FIPS/">FIPS mode</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/Basic-iq-handler/">Basic IQ Handler</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/mongoose_wpool/">mongoose_wpool</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Module index</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_adhoc/">mod_adhoc</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_amp/">mod_amp</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_auth_token/">mod_auth_token</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_blocking/">mod_blocking</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_bosh/">mod_bosh</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_caps/">mod_caps</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_carboncopy/">mod_carboncopy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_commands/">mod_commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_csi/">mod_csi</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_inbox/">mod_inbox</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_disco/">mod_disco</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_global_distrib/">mod_global_distrib</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">mod_event_pusher</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher/">mod_event_pusher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher_http/">HTTP backend</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher_push/">Push backend</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher_sns/">SNS backend</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher_rabbit/">RabbitMQ backend</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_extdisco/">mod_extdisco</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_http_upload/">mod_http_upload</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_jingle_sip/">mod_jingle_sip</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_keystore/">mod_keystore</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_last/">mod_last</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_mam/">mod_mam</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc/">mod_muc</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_commands/">mod_muc_commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_log/">mod_muc_log</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_light/">mod_muc_light</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_light_commands/">mod_muc_light_commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_offline/">mod_offline</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_offline_stub/">mod_offline_stub</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_ping/">mod_ping</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_privacy/">mod_privacy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_private/">mod_private</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_pubsub/">mod_pubsub</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_push_service_mongoosepush/">mod_push_service_mongoosepush</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_register/">mod_register</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_roster/">mod_roster</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_shared_roster_ldap/">mod_shared_roster_ldap</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_sic/">mod_sic</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_stream_management/">mod_stream_management</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_time/">mod_time</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_vcard/">mod_vcard</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_version/">mod_version</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">MongooseIM</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Configuration &raquo;</li>
        
      
    
    <li>Options: General</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>The <code>general</code> section contains basic settings as well as some miscellaneous options.
You can start with providing only the basic options, configuring the loglevel, a single host (XMPP domain) and setting the default server language:</p>
<pre><code>[general]
  loglevel = &quot;warning&quot;
  hosts = [&quot;my-xmpp-domain.com&quot;]
  language = &quot;en&quot;
</code></pre>
<p>All options are described below.</p>
<h1 id="general-options">General options</h1>
<p>These are the basic settings that you should configure before running your MongooseIM server.</p>
<h2 id="generalloglevel"><code>general.loglevel</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> string, one of <code>"none"</code>, <code>"emergency"</code>, <code>"alert"</code>, <code>"critical"</code>, <code>"error"</code>, <code>"warning"</code>, <code>"notice"</code>, <code>"info"</code>, <code>"debug"</code>, <code>"all"</code>.</li>
<li><strong>Default:</strong> <code>"warning"</code></li>
<li><strong>Example:</strong> <code>loglevel = "error"</code></li>
</ul>
<p>Verbosity level of the logger. Values recommended for production systems are <code>"error"</code> and <code>"warning"</code>. The <code>"debug"</code> level is good for development.</p>
<h2 id="generalhosts"><code>general.hosts</code></h2>
<ul>
<li><strong>Scope:</strong> global</li>
<li><strong>Syntax:</strong> array of strings representing the domain names.</li>
<li><strong>Default:</strong> there is no default, you have to provide at least one host name.</li>
<li><strong>Example:</strong> <code>hosts = ["localhost", "domain2"]</code></li>
</ul>
<p>Mandatory option, specifying the XMPP domains served by this cluster.</p>
<p><strong>Warning:</strong> Extension modules and database backends will be started separately for every domain. When increasing the number of domains, please make sure you have enough resources available (e.g. connection limit set in the DBMS).</p>
<h2 id="generallanguage"><code>general.language</code></h2>
<ul>
<li><strong>Scope:</strong> global</li>
<li><strong>Syntax:</strong> string representing the two-letter language code.</li>
<li><strong>Default:</strong> <code>"en"</code></li>
<li><strong>Example:</strong> <code>language = "pl"</code></li>
</ul>
<p>Default language for messages sent by the server to users. You can get a full list of supported codes by executing <code>cd [MongooseIM root] ; ls priv/*.msg | awk '{split($0,a,"/"); split(a[4],b,"."); print b[1]}'</code> (<code>en</code> is not listed there)</p>
<h1 id="database-settings">Database settings</h1>
<p>RDBMS connection pools are set using <a href="../outgoing-connections/">outgoing connections configuration</a>.
There are some additional options that influence all database connections in the server:</p>
<h2 id="generalrdbms_server_type"><code>general.rdbms_server_type</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> string, <code>"mssql"</code> or <code>"pgsql"</code></li>
<li><strong>Default:</strong> not set</li>
<li><strong>Example:</strong> <code>rdbms_server_type = "mssql"</code></li>
</ul>
<p>When using MSSQL or PostgreSQL databases, this option allows MongooseIM to optimize some queries for these DBs (e.g. <code>mod_mam_rdbms_user</code> uses different queries for <code>mssql</code>).</p>
<h2 id="generalpgsql_users_number_estimate"><code>general.pgsql_users_number_estimate</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> boolean</li>
<li><strong>Default:</strong> false</li>
<li><strong>Example:</strong> <code>pgsql_users_number_estimate = true</code></li>
</ul>
<p>PostgreSQL's internal structure can make row counting slow.
Enabling this option uses an alternative query instead of <code>SELECT COUNT</code>, that might be not as accurate, but is always fast.</p>
<h1 id="access-management">Access management</h1>
<p>User access rules are configured mainly in the <a href="../acl/"><code>acl</code></a> and <a href="../access/"><code>access</code></a> sections. Here you can find some additional options.</p>
<h2 id="generalmongooseimctl_access_commands"><code>general.mongooseimctl_access_commands</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> TOML table, whose <strong>keys</strong> are the names of the access rules defined in the <a href="../access/"><code>access</code></a> config section and <strong>values</strong> specify allowed administration commands. Each value is a table with the following nested options:<ul>
<li><code>commands</code>: mandatory, a list of strings representing the allowed commands, or the string <code>"all"</code></li>
<li><code>argument_restrictions</code>: optional, a table whose keys are the argument names and the values are strings representing the allowed values</li>
</ul>
</li>
<li><strong>Default:</strong> not set</li>
</ul>
<p>By default all admin operations are permitted with the <code>mongooseimctl</code> command without authentication. You can change that by setting this option for a specific access rule. When the rule returns the value <code>"allow"</code>, the user is permitted to use the specified commands with the optional restrictions.</p>
<p><strong>Example 1.</strong> Allow administrators to execute all commands without any restrictions:</p>
<pre><code>  [general.mongooseimctl_access_commands.admin]
    commands = &quot;all&quot;
</code></pre>
<p>The <code>admin</code> rule needs to be defined in the <code>access</code> section.</p>
<p><strong>Example 2.</strong> Allow local users to execute the <code>join_cluster</code> command, but only if the <code>node</code> argument is equal to <code>mongooseim@prime</code>:</p>
<pre><code>  [general.mongooseimctl_access_commands.local]
    commands = [&quot;join_cluster&quot;]
    argument_restrictions.node = &quot;mongooseim@prime&quot;
</code></pre>
<p>The <code>local</code> rule needs to be defined in the <code>access</code> section.</p>
<h1 id="security">Security</h1>
<p>Here you can find some additional options related to system security.</p>
<h2 id="generalregistration_timeout"><code>general.registration_timeout</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> the string <code>"infinity"</code> or a number of seconds (positive integer)</li>
<li><strong>Default:</strong> <code>600</code></li>
<li><strong>Example:</strong> <code>registration_timeout = "infinity"</code></li>
</ul>
<p>Limits the registration frequency from a single IP address. The special value <code>infinity</code> means no limit.</p>
<h2 id="generalhide_service_name"><code>general.hide_service_name</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> boolean</li>
<li><strong>Default:</strong> <code>false</code></li>
<li><strong>Example:</strong> <code>hide_service_name = true</code></li>
</ul>
<p>According to RFC 6210, even when a client sends invalid data after opening a connection, the server must open an XML stream and return a stream error anyway. For extra security, this option may be enabled. It changes MIM behaviour to simply close the connection without any errors returned (effectively hiding the server's identity).</p>
<h1 id="user-session-management">User session management</h1>
<p>These options can be used to configure the way MongooseIM manages user sessions.</p>
<h2 id="generalsm_backend"><code>general.sm_backend</code></h2>
<ul>
<li><strong>Scope:</strong> global</li>
<li><strong>Syntax:</strong> string, <code>"mnesia"</code> or <code>"redis"</code></li>
<li><strong>Default:</strong> <code>"mnesia"</code></li>
<li><strong>Example:</strong> <code>sm_backend = "redis"</code></li>
</ul>
<p>Backend for storing user session data. All nodes in a cluster must have access to a complete session database.
Mnesia is sufficient in most cases, use Redis only in large deployments when you notice issues with the mnesia backend. Requires a redis pool with the <code>default</code> tag defined in the <code>outgoing_pools</code> section.
See the section about <a href="../outgoing-connections/#redis-connection-setup">redis connection setup</a> for more information.</p>
<h2 id="generalreplaced_wait_timeout"><code>general.replaced_wait_timeout</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> positive integer, representing time in milliseconds</li>
<li><strong>Default:</strong> <code>2000</code></li>
<li><strong>Example:</strong> <code>replaced_wait_timeout = 5000</code></li>
</ul>
<p>When a user's session is replaced (due to a full JID conflict) by a new one, this parameter specifies the time MongooseIM waits for the old sessions to close. The default value is sufficient in most cases. If you observe <code>replaced_wait_timeout</code> warning in logs, then most probably the old sessions are frozen for some reason and it should be investigated.</p>
<h1 id="message-routing">Message routing</h1>
<p>The following options influence the way MongooseIM routes incoming messages to their recipients.</p>
<h2 id="generalroute_subdomains"><code>general.route_subdomains</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> string, the only accepted value is <code>"s2s"</code></li>
<li><strong>Default:</strong> not set</li>
<li><strong>Example:</strong> <code>route_subdomains = "s2s"</code></li>
</ul>
<p>If a stanza is addressed to a subdomain of the served domain and this option is set to <code>s2s</code>, such a stanza will be transmitted over a server-to-server connection. Without it, MongooseIM will try to route the stanza to one of its internal services.</p>
<h2 id="generalrouting_modules"><code>general.routing_modules</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> a list of strings representing the routing module names.</li>
<li><strong>Default:</strong> <code>["mongoose_router_global", "mongoose_router_localdomain", "mongoose_router_external_localnode", "mongoose_router_external", "ejabberd_s2s"]</code></li>
<li><strong>Example:</strong> <code>routing_modules = ["mongoose_router_global", "mongoose_router_localdomain"]</code></li>
</ul>
<p>Provides an ordered list of modules used for routing messages. If one of the modules accepts packet for processing, the remaining ones are not called.</p>
<p>Allowed module names:</p>
<ul>
<li><code>mongoose_router_global</code> - calls the <code>filter_packet</code> hook.</li>
<li><code>mongoose_router_localdomain</code> - routes packets addressed to a domain supported by the local cluster.</li>
<li><code>mongoose_router_external_localnode</code> - delivers packets to an XMPP component connected to the node, which processes the request.</li>
<li><code>mongoose_router_external</code> - delivers packets to an XMPP component connected to the local cluster.</li>
<li><code>ejabberd_s2s</code> - forwards packets to another XMPP cluster over XMPP Federation.</li>
</ul>
<h1 id="miscellaneous">Miscellaneous</h1>
<p>The options listed below are used to configure more specific settings, that do not need to be changed in usual use cases.</p>
<h2 id="generalall_metrics_are_global"><code>general.all_metrics_are_global</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> boolean</li>
<li><strong>Default:</strong> <code>false</code></li>
<li><strong>Example:</strong> <code>all_metrics_are_global = true</code></li>
</ul>
<p>When enabled, all per-host metrics are merged into global equivalents. It means it is no longer possible to view individual host1, host2, host3, ... metrics, only sums are available. This option significantly reduces CPU and (especially) memory footprint in setups with exceptionally many domains (thousands, tens of thousands).</p>
<h2 id="generalhttp_server_name"><code>general.http_server_name</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> string</li>
<li><strong>Default:</strong> <code>"Cowboy"</code></li>
<li><strong>Example:</strong> <code>http_server_name = "Apache"</code></li>
</ul>
<p>Replaces <a href="https://github.com/ninenines/cowboy">Cowboy</a>'s default name returned in the <code>server</code> HTTP response header. It may be used for extra security, as it makes it harder for the malicious user to learn what HTTP software is running under a specific port. This option applies to <strong>all</strong> configured HTTP listeners.</p>
<h2 id="generaloverride"><code>general.override</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> array of strings: <code>"global"</code>, <code>"local"</code>, <code>"acls"</code></li>
<li><strong>Default:</strong> not set</li>
<li><strong>Example:</strong> <code>override = ["global", "local"]</code></li>
</ul>
<p>Will cause MongooseIM to erase all global/local/acl configuration options in database respectively. This ensures that ALL settings of a specific type will be reloaded on startup.</p>
<h2 id="generalmax_fsm_queue"><code>general.max_fsm_queue</code></h2>
<ul>
<li><strong>Scope:</strong> local</li>
<li><strong>Syntax:</strong> positive integer</li>
<li><strong>Default:</strong> not set</li>
<li><strong>Example:</strong> <code>max_fsm_queue = 5000</code></li>
</ul>
<p>When specified, will terminate certain processes (e.g. client handlers) that have more messages accumulated in the queue than the specified limit, to prevent resource exhaustion.
This option is set for C2S, outgoing S2S and component connections and can be overridden for particular <code>s2s</code> or <code>service</code> listeners in their configurations. <strong>Use with caution!</strong></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../listen/" class="btn btn-neutral float-right" title="Options: Listen">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../Advanced-configuration/" class="btn btn-neutral" title="Configuration files"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../../Advanced-configuration/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../listen/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
