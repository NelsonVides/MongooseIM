<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../favicon.ico">
  
  <title>MUC light - MongooseIM</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../custom.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "MUC light";
    var mkdocs_page_input_path = "open-extensions/muc_light.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> MongooseIM</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">User guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Get-to-know-MongooseIM/">ABCs of MongooseIM</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/MongooseIM-High-level-Architecture/">High-level Architecture</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Features-and-supported-standards/">Features and supported standards</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Getting-started/">Getting started</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/release_config/">Release/Installation configuration</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tutorials</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/How-to-build/">How to Build MongooseIM from source code</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Push-notifications/">How to Set up MongoosePush</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/ICE_tutorial/">How to Set up MongooseICE</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/iOS_tutorial/">How to Build an iOS messaging app</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/Jingle-SIP-setup/">How to Set up Jingle/SIP</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Platform</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../Roadmap/">Roadmap</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../Contributions/">Contributions to ecosystem</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../Differentiators/">Differentiators</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../History/">History</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Configuration</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../Basic-configuration/">Basic Configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../Advanced-configuration/">Advanced Configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../advanced-configuration/database-backends-configuration/">Database backends configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../advanced-configuration/Modules/">Extension Modules</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../advanced-configuration/Listener-modules/">Listener Modules</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../advanced-configuration/acl/">ACL</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../advanced-configuration/Services/">Services</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Authentication methods</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-methods/client-certificate/">Client Certificate</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Authentication backends</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-backends/External-authentication-module/">External Authentication Module</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-backends/HTTP-authentication-module/">HTTP Authentication Module</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-backends/JWT-authentication-module/">JWT Authentication Module</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-backends/LDAP-authentication-module/">LDAP Authentication Module</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../authentication-backends/PKI-authentication-module/">PKI Authentication Module</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">MongooseIM open XMPP extensions</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">MUC light</a>
    <ul class="current">
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../token-reconnection/">Token-based reconnection</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">REST API</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../rest-api/Client-frontend/">Client/frontend</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../rest-api/Metrics-backend/">Metrics backend</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../rest-api/Administration-backend/">Administration backend</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Operation and maintenance</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Cluster-management-considerations/">Cluster management considerations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Cluster-configuration-and-node-management/">Cluster configuration and node management</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Logging-%26-monitoring/">Logging & monitoring</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Reloading-configuration-on-a-running-system/">Reloading configuration on a running system</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/Mongoose-metrics/">Metrics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../operation-and-maintenance/tls-distribution/">Distribution over TLS</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Developer's guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/Testing-MongooseIM/">Testing MongooseIM</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/logging/">Logging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/Hooks-and-handlers/">Hooks and Handlers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/hooks_description/">Hooks description</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/message_routing/">Stanza routing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/accumulators/">Accumulators</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/flat_options/">Flat options format</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/Moving-to-single-app-project-structure/">Moving to single app project structure</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/mod_amp_developers_guide/">mod_amp development</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/mod_muc_light_developers_guide/">mod_muc_light developers doc</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/SCRAM-serialization/">SCRAM serialization format</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/xep_tool/">xep-tool usage</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../developers-guide/OpenSSL-and-FIPS/">FIPS mode</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Module index</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_adhoc/">mod_adhoc</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_amp/">mod_amp</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_auth_token/">mod_auth_token</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_blocking/">mod_blocking</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_bosh/">mod_bosh</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_caps/">mod_caps</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_carboncopy/">mod_carboncopy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_commands/">mod_commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_csi/">mod_csi</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_inbox/">mod_inbox</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_disco/">mod_disco</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_global_distrib/">mod_global_distrib</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">mod_event_pusher</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher/">mod_event_pusher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher_http/">HTTP backend</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher_push/">Push backend</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../modules/mod_event_pusher_sns/">SNS backend</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_http_upload/">mod_http_upload</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_jingle_sip/">mod_jingle_sip</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_keystore/">mod_keystore</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_last/">mod_last</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_mam/">mod_mam</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc/">mod_muc</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_commands/">mod_muc_commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_log/">mod_muc_log</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_light/">mod_muc_light</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_muc_light_commands/">mod_muc_light_commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_offline/">mod_offline</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_offline_stub/">mod_offline_stub</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_ping/">mod_ping</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_privacy/">mod_privacy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_private/">mod_private</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_pubsub/">mod_pubsub</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_push_service_mongoosepush/">mod_push_service_mongoosepush</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_register/">mod_register</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_revproxy/">mod_revproxy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_roster/">mod_roster</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_shared_roster_ldap/">mod_shared_roster_ldap</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_sic/">mod_sic</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_stream_management/">mod_stream_management</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_time/">mod_time</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_vcard/">mod_vcard</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../modules/mod_version/">mod_version</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">MongooseIM</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>MongooseIM open XMPP extensions &raquo;</li>
        
      
    
    <li>MUC light</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="1-introduction">1. Introduction</h1>
<p>Classic Multi-User chat, as described in XEP-0045, adds an IRC-like functionality to XMPP. 
It distinguishes between the affiliation list and the occupant list, where the latter is based on presences routed to the room from the client resource. 
While perfectly sufficient for desktop applications and relatively stable network connection, it does not exactly meet the challenges the mobile world it is facing. 
Modern mobile applications do not rely on presence information, as it can frequently change. The expected user experience not only differs from the IRC model, but also uses only a small subset of XEP-0045 features. 
The service described in this specification attempts to provide a complete solution for all common use cases of mobile groupchats.</p>
<h1 id="2-requirements">2. Requirements</h1>
<p>Here are some high-level features required from a new variant of MUC</p>
<ol>
<li>The service allows any user to create a room for group communication.</li>
<li>Users cannot join rooms on their own. They have to be added by the room owner or (if configured by service administrator) any other occupant.</li>
<li>Only the owner can remove other occupants from the room.</li>
<li>Every occupant can leave the room.</li>
<li>A user may block the attempts of being added to the specific room or by specific user.</li>
<li>The message sent in the room is always broadcasted to every occupant.</li>
<li>The full occupant list is always available to all occupants.</li>
<li>The occupant is always visible on the list, even if they do not have any resources online.</li>
<li>Occupants can only have two affiliations: owner and member.</li>
<li>There MUST be at most one owner in the room (the service can choose to treat all users equally).</li>
<li>If the room becomes empty, it is destroyed.</li>
<li>Occupants cannot hide behind nicks. Their real bare JID is always visible to everyone</li>
<li>No exchange of any <code>&lt;presence/&gt;</code> stanza inside the room.</li>
<li>The user MUST be able to retrieve the list of rooms they occupy.</li>
<li>The owner can modify the room configuration at any time; members may also be allowed to set configuration.</li>
<li>All occupants can get the full room configuration at any time.</li>
<li>Room history is available only in Message Archive Management.</li>
</ol>
<h1 id="3-entity-use-cases">3. Entity Use Cases</h1>
<h2 id="31-discovering-a-muc-light-service">3.1 Discovering a MUC Light Service</h2>
<p>An entity often discovers a MUC service by sending a Service Discovery items ("disco#items") request to its own server.</p>
<p><strong>Entity Queries the Server for Associated Services</strong></p>
<pre><code class="language-xml">&lt;iq from='hag66@shakespeare.lit/pda'
    id='h7ns81g'
    to='shakespeare.lit'
    type='get'&gt;
    &lt;query xmlns='http://jabber.org/protocol/disco#items'/&gt;
&lt;/iq&gt;
</code></pre>
<p>The server then returns the services that are associated with it.</p>
<p><strong>Server Returns a Disco Items Result</strong></p>
<pre><code class="language-xml">&lt;iq from='shakespeare.lit'
    id='h7ns81g'
    to='hag66@shakespeare.lit/pda'
    type='result'&gt;
    &lt;query xmlns='http://jabber.org/protocol/disco#items'&gt;
        &lt;item jid='muclight.shakespeare.lit' name='MUC Light Service'/&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h2 id="32-discovering-the-features-supported-by-a-muc-light-service">3.2 Discovering the Features Supported by a MUC Light Service</h2>
<p>An entity may wish to discover if a service implements the Multi-User Chat protocol; in order to do so, it sends a service discovery information ("disco#info") query to the MUC service's JID.</p>
<p><strong>Entity Queries Chat Service for MUC Light Support via Disco</strong></p>
<pre><code class="language-xml">&lt;iq from='hag66@shakespeare.lit/pda'
    id='lx09df27'
    to='muclight.shakespeare.lit' type='get'&gt;
    &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
</code></pre>
<p>The service MUST return its identity and the features it supports.</p>
<p><strong>Service Returns a Disco Info Result</strong></p>
<pre><code class="language-xml">&lt;iq from='muclight.shakespeare.lit'
    id='lx09df27'
    to='hag66@shakespeare.lit/pda'
    type='result'&gt;
    &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
        &lt;identity category='conference' name='Shakespearean Chat Service' type='text'/&gt;
        &lt;feature var='urn:xmpp:muclight:0'/&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h2 id="33-discovering-occupied-rooms">3.3 Discovering Occupied Rooms</h2>
<p>The service discovery items ("disco#items") protocol enables an entity to query a service for a list of associated items, which in the case of a chat service would consist of the specific chat rooms the entity occupies.</p>
<p><strong>Entity Queries Chat Service for Rooms</strong></p>
<pre><code class="language-xml">&lt;iq from='hag66@shakespeare.lit/pda'
    id='zb8q41f4'
    to='muclight.shakespeare.lit'
    type='get'&gt;
    &lt;query xmlns='http://jabber.org/protocol/disco#items'/&gt;
&lt;/iq&gt;
</code></pre>
<p>The service MUST return a full list of the rooms the entity occupies. The server SHOULD include room name and version in each item.</p>
<p><strong>Service Returns a Disco Items Result</strong></p>
<pre><code class="language-xml">&lt;iq from='muclight.shakespeare.lit'
    id='zb8q41f4'
    to='hag66@shakespeare.lit/pda'
    type='result'&gt;
    &lt;query xmlns='http://jabber.org/protocol/disco#items'&gt;
        &lt;item jid='heath@muclight.shakespeare.lit' name='A Lonely Heath' version='1'/&gt;
        &lt;item jid='coven@muclight.shakespeare.lit' name='A Dark Cave' version='2'/&gt;
        &lt;item jid='forres@muclight.shakespeare.lit' name='The Palace' version='3'/&gt;
        &lt;item jid='inverness@muclight.shakespeare.lit'
              name='Macbeth&amp;apos;s Castle'
              version='4'/&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<p>If the full list of rooms is large (see XEP-0030 for details), the service MAY return only a partial list of rooms. If it does, it MUST include a <code>&lt;set/&gt;</code> element qualified by the 'http://jabber.org/protocol/rsm' namespace (as defined in Result Set Management (XEP-0059) [1]) to indicate that the list is not the full result set.</p>
<p><strong>Service Returns a Limited List of Disco Items Result</strong></p>
<pre><code class="language-xml">&lt;iq from='muclight.shakespeare.lit'
    id='hx51v49s'
    to='hag66@shakespeare.lit/pda'
    type='result'&gt;
    &lt;query xmlns='http://jabber.org/protocol/disco#items'&gt;
        &lt;item jid='alls-well-that-ends-well@muclight.shakespeare.lit'
              name='Everybody dies'
              version='1'/&gt;
        &lt;item jid='as-you-like-it@muclight.shakespeare.lit'
              name='As you like it'
              version='2'/&gt;
        &lt;item jid='cleopatra@muclight.shakespeare.lit' name='Cleo fans' version='3'/&gt;
        &lt;item jid='comedy-of-errors@muclight.shakespeare.lit'
              name='404 Comedy not found'
              version='4'/&gt;
        &lt;item jid='coriolanus@muclight.shakespeare.lit'
              name='What is Coriolanus?'
              version='5'/&gt;
        &lt;item jid='cymbeline@muclight.shakespeare.lit' name='Music room' version='6'/&gt;
        &lt;item jid='hamlet@muclight.shakespeare.lit'
              name='To chat or not to chat?'
              version='7'/&gt;
        &lt;item jid='henry-the-fourth-one@muclight.shakespeare.lit'
              name='Royal Room 1'
              version='8'/&gt;
        &lt;item jid='henry-the-fourth-two@muclight.shakespeare.lit'
              name='Royal Room 2'
              version='9'/&gt;
        &lt;item jid='henry-the-fifth@muclight.shakespeare.lit'
              name='Royal Room Prime'
              version='10'/&gt;
        &lt;set xmlns='http://jabber.org/protocol/rsm'&gt;
            &lt;first index='0'&gt;alls-well-that-ends-well@muclight.shakespeare.lit&lt;/first&gt;
            &lt;last&gt;henry-the-fifth@muclight.shakespeare.lit&lt;/last&gt;
            &lt;count&gt;37&lt;/count&gt;
        &lt;/set&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h1 id="4-occupant-use-cases">4. Occupant Use Cases</h1>
<h2 id="41-sending-a-message-to-a-room">4.1 Sending a message to a room</h2>
<p>Every occupant in the room MAY broadcast messages to other occupants. In order to do so, the client MUST send a groupchat message to the room bare JID.</p>
<p>The room automatically assumes that occupants' nicks are equal to their bare JIDs. MUC light is designed for applications where it is not important to hide behind nicknames. On the contrary - it is up to the client to replace pure JIDs with user-friendly names like phone numbers or full names if necessary.</p>
<p>The room MUST route all messages of the 'groupchat' type.</p>
<p><strong>Client sends a message to the room</strong></p>
<pre><code class="language-xml">&lt;message from='hag66@shakespeare.lit/pda'
         id='msg111'
         to='coven@muclight.shakespeare.lit'
         type='groupchat'&gt;
    &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
&lt;/message&gt;
</code></pre>
<p><strong>Server broadcasts a groupchat message</strong></p>
<pre><code class="language-xml">&lt;message id='msg111' type='groupchat'
    from='coven@muclight.shakespeare.lit/hag66@shakespeare.lit'
    to='crone1@shakespeare.lit'&gt;
    &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message id='msg111' type='groupchat'
    from='coven@muclight.shakespeare.lit/hag66@shakespeare.lit'
    to='crone2@shakespeare.lit'&gt;
    &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
&lt;/message&gt;
</code></pre>
<p>Note the message is sent to all the room occupants including the original sender.</p>
<pre><code class="language-xml">&lt;message id='msg111' type='groupchat'
    from='coven@muclight.shakespeare.lit/hag66@shakespeare.lit'
    to='hag66@shakespeare.lit'&gt;
    &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
&lt;/message&gt;
</code></pre>
<h2 id="42-changing-a-room-subject">4.2 Changing a room subject</h2>
<p>The service MAY allow room occupants to set the room subject by changing the "subject" configuration field. A standard configuration stanza is used in this case. Subject change is announced like an ordinary configuration change.</p>
<p><strong>Client sends a message to the room</strong></p>
<pre><code class="language-xml">&lt;iq from='hag66@shakespeare.lit/pda'
    id='subject1'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#configuration'&gt;
        &lt;subject&gt;To be or not to be?&lt;/subject&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='crone1@shakespeare.lit'
         type='groupchat'
         id='newsubject'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#configuration'&gt;
        &lt;prev-version&gt;asdfghj000&lt;/prev-version&gt;
        &lt;version&gt;asdfghj&lt;/version&gt;
        &lt;subject&gt;To be or not to be?&lt;/subject&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='hag66@shakespeare.lit'
         type='groupchat'
         id='newsubject'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#configuration'&gt;
        &lt;prev-version&gt;asdfghj000&lt;/prev-version&gt;
        &lt;version&gt;asdfghj&lt;/version&gt;
        &lt;subject&gt;To be or not to be?&lt;/subject&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq to='hag66@shakespeare.lit/pda'
    id='subject1'
    from='coven@muclight.shakespeare.lit'
    type='result' /&gt;
</code></pre>
<h2 id="43-requesting-room-information">4.3 Requesting room information</h2>
<p>Room occupants may request room information (configuration and/or occupants list) by an information version. It is up to the service to define the version string, the only requirement for it, is to be unique per room. Please note there are no separate versions for configuration and occupant list alone.</p>
<p>If the server side version does not match the one provided by the client (or if the client does not provide one, i.e. the 'version' element is empty), the service MUST respond with a current version string and full configuration and/or occupant list.</p>
<p>If the version strings match, server MUST reply with an empty result.</p>
<p>Only room occupants can get room information.</p>
<p><strong>Matching versions</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='config0'
    to='coven@muclight.shakespeare.lit'
    type='get'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#configuration'&gt;
        &lt;version&gt;abcdefg&lt;/version&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq from='coven@muclight.shakespeare.lit'
    id='config0'
    to='crone1@shakespeare.lit/desktop'
    type='result' /&gt;
</code></pre>
<h3 id="431-getting-the-room-configuration">4.3.1 Getting the room configuration</h3>
<p><strong>Client gets configuration from the server</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='getconfig1'
    to='coven@muclight.shakespeare.lit'
    type='get'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#configuration'&gt;
        &lt;version&gt;abcdefg&lt;/version&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq from='coven@muclight.shakespeare.lit'
    id='getconfig1'
    to='crone1@shakespeare.lit/desktop'
    type='result'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#configuration'&gt;
        &lt;version&gt;123456&lt;/version&gt;
        &lt;roomname&gt;A Dark Cave&lt;/roomname&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h3 id="432-requesting-a-user-list">4.3.2 Requesting a user list</h3>
<p><strong>Client requests a user list</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='getmembers'
    to='coven@muclight.shakespeare.lit'
    type='get'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;version&gt;abcdefg&lt;/version&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq from='coven@muclight.shakespeare.lit'
    id='getmembers'
    to='crone1@shakespeare.lit/desktop'
    type='result'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;version&gt;123456&lt;/version&gt;
        &lt;user affiliation='owner'&gt;user1@shakespeare.lit&lt;/user&gt;
        &lt;user affiliation='member'&gt;user2@shakespeare.lit&lt;/user&gt;
        &lt;user affiliation='member'&gt;user3@shakespeare.lit&lt;/user&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h3 id="433-requesting-full-room-information">4.3.3 Requesting full room information</h3>
<p>Room occupants may request both lists (configuration + occupants) with a single request.</p>
<p><strong>Client requests room information</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='getinfo1'
    to='coven@muclight.shakespeare.lit'
    type='get'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#info'&gt;
        &lt;version&gt;abcdefg&lt;/version&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq from='coven@muclight.shakespeare.lit'
    id='getinfo1'
    to='crone1@shakespeare.lit/desktop'
    type='result'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#info'&gt;
        &lt;version&gt;123456&lt;/version&gt;
        &lt;configuration&gt;
            &lt;roomname&gt;A Dark Cave&lt;/roomname&gt;
        &lt;/configuration&gt;
        &lt;occupants&gt;
            &lt;user affiliation='owner'&gt;user1@shakespeare.lit&lt;/user&gt;
            &lt;user affiliation='member'&gt;user2@shakespeare.lit&lt;/user&gt;
            &lt;user affiliation='member'&gt;user3@shakespeare.lit&lt;/user&gt;
        &lt;/occupants&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h2 id="44-leaving-the-room">4.4 Leaving the room</h2>
<p>Every occupant is allowed to leave the room at any time. It is done by modifying their own affiliation.</p>
<p><strong>Occupant leaves the room</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='leave1'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user affiliation='none'&gt;crone1@shakespeare.lit&lt;/user&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='crone1@shakespeare.lit'
         type='groupchat'
         id='leave1'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user affiliation='none'&gt;crone1@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='hag77@shakespeare.lit'
         type='groupchat'
         id='leave1'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;prev-version&gt;1111111&lt;/prev-version&gt;
        &lt;version&gt;aaaaaaa&lt;/version&gt;
        &lt;user affiliation='none'&gt;crone1@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='hag88@shakespeare.lit'
         type='groupchat'
         id='leave1'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;prev-version&gt;1111111&lt;/prev-version&gt;
        &lt;version&gt;aaaaaaa&lt;/version&gt;
        &lt;user affiliation='none'&gt;crone1@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq to='crone1@shakespeare.lit/desktop'
    id='leave1'
    from='coven@muclight.shakespeare.lit'
    type='result' /&gt;
</code></pre>
<h2 id="45-blocking-functionality">4.5 Blocking functionality</h2>
<p>A user MAY choose to automatically deny being added to the room. All stanzas must be directed to MUC Light service. User MAY send more than one item in a single request and mix both 'user' and 'room' elements.</p>
<p>If the occupant tries to add another user to the room, and this user has set a blocking policy, the server MUST ignore the attempt. No error is returned, this user is simply skipped when processing affiliation change query.</p>
<p><strong>Service denies adding blocking user</strong></p>
<pre><code class="language-xml">&lt;iq from='crone2@shakespeare.lit/desktop'
    id='blocked1'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user affiliation='member'&gt;crone1@shakespeare.lit&lt;/user&gt;
        &lt;user affiliation='member'&gt;crone3@shakespeare.lit&lt;/user&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='crone2@shakespeare.lit'
         type='groupchat'
         id='blockedadd1'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user affiliation='member'&gt;crone3@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='hag88@@shakespeare.lit'
         type='groupchat'
         id='blockedadd1'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user affiliation='member'&gt;crone3@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq to='crone2@shakespeare.lit/desktop'
    id='blocked1'
    from='coven@muclight.shakespeare.lit'
    type='result' /&gt;
</code></pre>
<h3 id="451-requesting-a-blocking-list">4.5.1 Requesting a blocking list</h3>
<p>In order to get the current blocking list in the MUC Light service, the client sends an empty IQ get query with a proper namespace.</p>
<p>The list includes only items with a 'deny' action, since the 'allow' behaviour is default for MUC Light and is only used for the list modification.</p>
<p><strong>User retrieves a blocking list</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='getblock1'
    to='muclight.shakespeare.lit'
    type='get'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#blocking'&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq type='result'
    id='getblock1'
    to='crone1@shakespeare.lit/desktop'
    from='muclight.shakespeare.lit'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#blocking'&gt;
        &lt;room action='deny'&gt;coven@muclight.shakespeare.lit&lt;/room&gt;
        &lt;user action='deny'&gt;hag77@shakespeare.lit&lt;/user&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h3 id="452-blocking-a-room">4.5.2 Blocking a room</h3>
<p>In order to block a room, a query must contain at least one 'room' item with a 'deny' action and a room bare JID in the content.</p>
<p><strong>User blocks a room</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='block1'
    to='muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#blocking'&gt;
        &lt;room action='deny'&gt;coven@muclight.shakespeare.lit&lt;/room&gt;
        &lt;room action='deny'&gt;chapel@shakespeare.lit&lt;/room&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq type='result'
    id='block1'
    to='crone1@shakespeare.lit/desktop'
    from='muclight.shakespeare.lit' /&gt;
</code></pre>
<h3 id="453-blocking-a-user">4.5.3 Blocking a user</h3>
<p>In order to block a user, a query must contain at least one 'user' item with a 'deny' action and a user bare JID in the content.</p>
<p><strong>User blocks another user</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='block2'
    to='muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#blocking'&gt;
        &lt;user action='deny'&gt;hag66@shakespeare.lit&lt;/user&gt;
        &lt;user action='deny'&gt;hag77@shakespeare.lit&lt;/user&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq type='result'
    id='block2'
    to='crone1@shakespeare.lit/desktop'
    from='muclight.shakespeare.lit' /&gt;
</code></pre>
<h3 id="454-unblocking">4.5.4 Unblocking</h3>
<p>In order to cancel a blocking, a query must contain at least one 'room' or 'user' item with an 'allow' action and an appriopriate bare JID in the content.</p>
<p>Unblocking a JID that is not blocked does not trigger any error. The server MUST return an empty IQ result in such case.</p>
<p><strong>User cancels blocking</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='unblock1'
    to='muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#blocking'&gt;
        &lt;room action='allow'&gt;coven@muclight.shakespeare.lit&lt;/room&gt;
        &lt;user action='allow'&gt;hag66@shakespeare.lit&lt;/user&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq type='result'
    id='unblock1'
    to='crone1@shakespeare.lit/desktop'
    from='muclight.shakespeare.lit' /&gt;
</code></pre>
<h1 id="5-owner-use-cases">5. Owner Use Cases</h1>
<h2 id="51-creating-a-new-room">5.1 Creating a new room</h2>
<p>A room is created by submitting a dedicated stanza. The client application should pick a random room node name, since a human-readable room name is in configuration.</p>
<p>For rules that apply to the configuration options, please see "Setting room configuration" chapter.</p>
<p>The client MAY include initial configuration and occupant list (the list MUST NOT include the creator). The server MAY allow sending an incomplete configuration form. In such case the server MUST use the default values for missing fields. The server MAY enforce a minimal occupant list length.</p>
<p>The service MAY either give the creator the 'owner' or 'member' status. In the latter case all users are equal.</p>
<p>Upon room creation success, the service MUST reply with an empty IQ result.</p>
<p>The following rules (similar to the ones relevant to the affiliation change request) apply to the occupant list:</p>
<ul>
<li>'none' affiliation cannot be used.</li>
<li>All user bare JIDs must be unique</li>
<li>At most one owner can be chosen. If none is chosen, the room creator will become "just" a 'member'.</li>
</ul>
<p>After the room is created (but before receiving IQ result), new occupants (including the creator) receive <code>&lt;message/&gt;</code> from the room with their affiliations (the stanza MUST include only recipient's affiliation) and the initial room version. <code>&lt;prev-version/&gt;</code> element MUST NOT be included.</p>
<p><strong>Client requests room creation</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='create1'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#create'&gt;
        &lt;configuration&gt;
            &lt;roomname&gt;A Dark Cave&lt;/roomname&gt;
        &lt;/configuration&gt;
        &lt;occupants&gt;
            &lt;user affiliation='member'&gt;user1@shakespeare.lit&lt;/user&gt;
            &lt;user affiliation='member'&gt;user2@shakespeare.lit&lt;/user&gt;
        &lt;/occupants&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='crone1@shakespeare.lit'
         type='groupchat'
         id='createnotif'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;version&gt;aaaaaaa&lt;/version&gt;
        &lt;user affiliation='owner'&gt;crone1@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='user1@shakespeare.lit'
         type='groupchat'
         id='createnotif'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;version&gt;aaaaaaa&lt;/version&gt;
        &lt;user affiliation='member'&gt;user1@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='user2@shakespeare.lit'
         type='groupchat'
         id='createnotif'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;version&gt;aaaaaaa&lt;/version&gt;
        &lt;user affiliation='member'&gt;user2@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq to='crone1@shakespeare.lit/desktop'
    id='create1'
    from='coven@muclight.shakespeare.lit'
    type='result' /&gt;
</code></pre>
<h3 id="511-requesting-a-new-room-with-a-unique-name">5.1.1 Requesting a new room with a unique name</h3>
<p>If a client would like to avoid a room JID conflict, it MAY request creating a new room with a server-side generated name, that is verfied to be unique. In order to do so, the client MUST send a creation request to service JID, not room bare JID. The IQ result will originate from the new room bare JID</p>
<p>The messages with affiliation change notifications MUST have the same ID as IQ set and result.</p>
<p><strong>Client requests room creation</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='createrandom'
    to='muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#create'&gt;
        &lt;configuration&gt;
            &lt;roomname&gt;Random Cave&lt;/roomname&gt;
        &lt;/configuration&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='randomcave@muclight.shakespeare.lit'
         to='crone1@shakespeare.lit'
         type='groupchat'
         id='createrandom'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;version&gt;aaaaaaa&lt;/version&gt;
        &lt;user affiliation='owner'&gt;crone1@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq to='crone1@shakespeare.lit/desktop'
    id='createrandom'
    from='muclight.shakespeare.lit'
    type='result' /&gt;
</code></pre>
<h3 id="512-room-already-exists">5.1.2 Room already exists</h3>
<p>If the chosen room name already exists, the service MUST return a 'conflict' error.</p>
<p><strong>Client requests room creation with existing name</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='conflict1'
    to='castle@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#create'&gt;
        &lt;configuration&gt;
            &lt;roomname&gt;A Dark Cave&lt;/roomname&gt;
        &lt;/configuration&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq to='crone1@shakespeare.lit/desktop'
    id='conflict1'
    from='castle@muclight.shakespeare.lit'
    type='error'&gt;
    &lt;error type='cancel'&gt;
        &lt;conflict xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;/error&gt;
&lt;/iq&gt;
</code></pre>
<h2 id="52-destroying-a-room">5.2 Destroying a room</h2>
<p>A room is automatically destroyed when its occupant list becomes empty or the room owner explicitly sends an IQ with a room destroy request.</p>
<p>Before sending an IQ result, every occupant is notified that its affiliation has changed to 'none'. These notifications include an <code>&lt;x/&gt;</code> element qualified with a "urn:xmpp:muclight:0#destroy" namespace.</p>
<p>Only the room owner is allowed to destroy it.</p>
<p>Room destruction notification SHOULD NOT contain version (or "prev-version" information).</p>
<p><strong>Client requests room destruction</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='destroy1'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#destroy' /&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='crone1@shakespeare.lit'
         type='groupchat'
         id='destroynotif'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user affiliation='none'&gt;crone1@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#destroy' /&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='hag77@shakespeare.lit'
         type='groupchat'
         id='destroynotif'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user affiliation='none'&gt;hag77@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#destroy' /&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='hag88@shakespeare.lit'
         type='groupchat'
         id='destroynotif'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user affiliation='none'&gt;hag88@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#destroy' /&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq to='crone1@shakespeare.lit/desktop'
    id='create1'
    from='coven@muclight.shakespeare.lit'
    type='result' /&gt;
</code></pre>
<h2 id="53-setting-room-configuration">5.3 Setting room configuration</h2>
<p>Only room owners can modify the room configuration but the service MAY allow members to change it too.</p>
<p>All room occupants MUST be notified about a configuration change and both the new and old room version string (<code>&lt;version /&gt;</code> and <code>&lt;prev-version /&gt;</code> respectively).</p>
<p>"version" and "prev-version" configuration field names are NOT ALLOWED - they are reserved for room versioning.</p>
<p>The service MAY allow the client to set the configuration fields with any name but it is NOT RECOMMENDED.</p>
<p>The Data Forms are not used for the configuration. Instead, the config fields are encoded in XML elements with names equal to the key and content equal to the value.</p>
<p><strong>Client configuration request to the server</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='conf2'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#configuration'&gt;
        &lt;roomname&gt;A Darker Cave&lt;/roomname&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='crone1@shakespeare.lit'
         type='groupchat'
         id='configchange'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#configuration'&gt;
        &lt;prev-version&gt;zaqwsx&lt;/prev-version&gt;
        &lt;version&gt;zxcvbnm&lt;/version&gt;
        &lt;roomname&gt;A Darker Cave&lt;/roomname&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='hag66@shakespeare.lit'
         type='groupchat'
         id='configchange'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#configuration'&gt;
        &lt;prev-version&gt;zaqwsx&lt;/prev-version&gt;
        &lt;version&gt;zxcvbnm&lt;/version&gt;
        &lt;roomname&gt;A Darker Cave&lt;/roomname&gt;
    &lt;/x&gt;
    &lt;body /&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq to='crone1@shakespeare.lit/desktop'
    id='conf2'
    from='coven@muclight.shakespeare.lit'
    type='result' /&gt;
</code></pre>
<p>The server SHOULD accept incomplete (i.e. delta) configuration forms. In such case, values of the missing fields SHOULD be preserved.</p>
<h2 id="54-changing-the-occupant-list">5.4 Changing the occupant list</h2>
<p>The occupant list is modified by a direct affiliation change. Following rules apply:</p>
<ol>
<li>There are only 3 affiliations.<ul>
<li>owner - can do everything in the room</li>
<li>member - can send messages to the room and if the service allows it, can also change configuration or change others' affiliations</li>
<li>none - not in the room; it's a keyword for marking a user for removal from a room</li>
</ul>
</li>
<li>Every occupant can change its own affiliation to none in order to leave the room.</li>
<li>The only way to join the room is being added by other occupant.</li>
<li>The owner can change affiliations at will.</li>
<li>If the owner leaves, the server MAY use any strategy to choose a new one.</li>
<li>The room can have at most one owner. Giving someone else the 'owner' status effectively causes the current one to lose it.</li>
<li>The owner can choose a new owner when leaving by including both 'none' and 'owner' items in affiliation change request.</li>
<li>Every user JID can be used in the request at most once.</li>
<li>A single request MAY change multiple affiliations.</li>
<li>All changes must be meaningful, e.g. setting member's affiliation to 'member' is considered a bad request.</li>
<li>Server MAY allow members to add new members but they still cannot make anyone an 'owner' or remove other users from the room.</li>
<li>On success the server will reply with a result IQ with all the changed items. BEFORE returning the IQ result, the service MUST route a message with the affiliation change to all relevant users.</li>
</ol>
<p>Newcomers, i.e. users that were not occupants before the change, SHOULD receive only their own affiliation and SHOULD NOT receive a <code>&lt;prev-version /&gt;</code> element.</p>
<p>The notifications must include both the new and old room version (<code>&lt;version /&gt;</code> and <code>&lt;prev-version /&gt;</code> respectively) string (except for the ones directed to users that have been removed from the room).</p>
<p>The notifications contain a list of items. The item list may be different from the list in the IQ set, because some of the changes may require additional operations, e.g. choosing new owner when the old one leaves. Users, that are still in the room after the change, will receive the full change list. Users, that have been removed from the room with the request, will get only one item: themselves with affiliation 'none'.</p>
<p><strong>Affiliations change request</strong></p>
<p>Let's consider a room <code>coven</code> with following members:</p>
<ul>
<li><code>crone1</code> - <code>owner</code></li>
<li><code>hag77</code> - <code>member</code></li>
<li><code>hag88</code> - <code>member</code></li>
</ul>
<p><code>hag66</code> is not in the room yet.</p>
<p>User <code>crone1</code> wants to add <code>hag66</code> to the room, kick <code>hag88</code> out and make <code>hag77</code> the room owner.</p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='member1'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user affiliation='member'&gt;hag66@shakespeare.lit&lt;/user&gt;
        &lt;user affiliation='owner'&gt;hag77@shakespeare.lit&lt;/user&gt;
        &lt;user affiliation='none'&gt;hag88@shakespeare.lit&lt;/user&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<p>Now each user will receive an update.
As you can see, affiliations have changed accordingly to <code>crone1</code> request.
However, this request implies one more update.
Since <code>hag77</code> has been promoted to a new owner, <code>crone1</code> is automatically degraded to <code>member</code>.</p>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='crone1@shakespeare.lit'
         type='groupchat'
         id='memberchange'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;prev-version&gt;njiokm&lt;/prev-version&gt;
        &lt;version&gt;qwerty&lt;/version&gt;
        &lt;user affiliation='member'&gt;crone1@shakespeare.lit&lt;/user&gt;
        &lt;user affiliation='member'&gt;hag66@shakespeare.lit&lt;/user&gt;
        &lt;user affiliation='owner'&gt;hag77@shakespeare.lit&lt;/user&gt;
        &lt;user affiliation='none'&gt;hag88@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body&gt;&lt;/body&gt;
&lt;/message&gt;
</code></pre>
<p>Because <code>hag66</code> was not a member of this room before, they only receive <strong>their own affiliation</strong> and <strong>no prev-version</strong> element.</p>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='hag66@shakespeare.lit'
         type='groupchat'
         id='memberchange'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;version&gt;qwerty&lt;/version&gt;
        &lt;user affiliation='member'&gt;hag66@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body&gt;&lt;/body&gt;
&lt;/message&gt;
</code></pre>
<p><code>hag77</code> receives an ordinary update, just like <code>crone1</code>.</p>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='hag77@shakespeare.lit'
         type='groupchat'
         id='memberchange'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;prev-version&gt;njiokm&lt;/prev-version&gt;
        &lt;version&gt;qwerty&lt;/version&gt;
        &lt;user affiliation='member'&gt;crone1@shakespeare.lit&lt;/user&gt;
        &lt;user affiliation='member'&gt;hag66@shakespeare.lit&lt;/user&gt;
        &lt;user affiliation='owner'&gt;hag77@shakespeare.lit&lt;/user&gt;
        &lt;user affiliation='none'&gt;hag88@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body&gt;&lt;/body&gt;
&lt;/message&gt;
</code></pre>
<p><code>hag88</code> has been kicked out of the room and therefore gets only their own affiliation change of type 'none'.</p>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='hag88@shakespeare.lit'
         type='groupchat'
         id='memberchange'&gt;
    &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user affiliation='none'&gt;hag88@shakespeare.lit&lt;/user&gt;
    &lt;/x&gt;
    &lt;body&gt;&lt;/body&gt;
&lt;/message&gt;
</code></pre>
<p><code>crone1</code> gets the result IQ after the change.</p>
<pre><code class="language-xml">&lt;iq to='crone1@shakespeare.lit/desktop'
    id='member1'
    from='coven@muclight.shakespeare.lit'
    type='result' /&gt;
</code></pre>
<h1 id="6-interactions-with-rfcs-and-other-xeps">6. Interactions with RFCs and other XEPs</h1>
<h2 id="61-user-rosters">6.1 User rosters</h2>
<p>The service MAY add user's rooms to its roster. It allows the client to skip the separate Disco request to the service.
Roster items with rooms MUST belong to the group "urn:xmpp:muclight:0" (MUC Light namespace) and include the <code>&lt;version/&gt;</code> element.
Their subscription type MUST be 'to'.</p>
<p><strong>Entity requests the roster and receives a reply that includes a room item</strong></p>
<pre><code class="language-xml">&lt;iq type='get' id='roster1' to='shakespeare.lit'&gt;
    &lt;query xmlns='jabber:iq:roster'/&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq id='roster1' to='hag66@shakespeare.lit/tablet' type='result'&gt;
    &lt;query xmlns='jabber:iq:roster' ver='ver7'&gt;
        &lt;item jid='hag77@shakespeare.lit' subscription='both'/&gt;
        &lt;item jid='hag88@shakespeare.lit' subscription='both'/&gt;
        &lt;item jid='coven@muclight.shakespeare.lit' name='The Coven' subscription='to'&gt;
            &lt;group&gt;urn:xmpp:muclight:0&lt;/group&gt;
            &lt;version&gt;1234345&lt;/version&gt;
        &lt;/item&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h2 id="62-xep-0313-message-archive-management">6.2 XEP-0313 Message Archive Management</h2>
<p>This section defines the rules for archiving MUC Light events and messages.
Stanzas described in the subsections below MUST be archived by the server.
The stanzas not included here MUST NOT be archived.</p>
<p>The <code>&lt;message/&gt;</code> element inside <code>&lt;forwarded/&gt;</code> MUST include a "from" attribute and MUST NOT include a "to" attribute.
"id" SHOULD be archived as well.</p>
<p>In case of regular groupchat messages,
the "from" attribute MUST consist of a room full JID with a sender bare JID in the resource part.
As for room notification, e.g. create event, "from" MUST be equal to room bare JID.</p>
<p>Examples below use MAM v0.4 protocol.
The archive can be fetched only from a specific room, the client MUST NOT query MUC Light service directly.</p>
<h3 id="621-groupchat-message-from-occupant">6.2.1 Groupchat message from occupant</h3>
<p>Message from a user MUST be archived with all child elements.</p>
<p><strong>Occupant queries MAM and receives regular groupchat message</strong></p>
<pre><code class="language-xml">&lt;iq type='set' id='mamget1' to='coven@muclight.shakespeare.lit'&gt;
    &lt;query xmlns='urn:xmpp:mam:1' queryid='f27' /&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;message id='aeb213' to='hag66@shakespeare.lit/pda'&gt;
    &lt;result xmlns='urn:xmpp:mam:1' queryid='f27' id='28482-98726-73623'&gt;
        &lt;forwarded xmlns='urn:xmpp:forward:0'&gt;
            &lt;delay xmlns='urn:xmpp:delay' stamp='2010-07-10T23:08:25Z'/&gt;
            &lt;message from=&quot;coven@muclight.shakespeare.lit/hag77@shakespeare.lit&quot;
                     id=&quot;msgid11&quot;&gt;
                &lt;body&gt;Welcome!&lt;/body&gt;
                &lt;x xmlns=&quot;elixir:ingredient&quot;&gt;bat-wing&lt;/x&gt;
            &lt;/message&gt;
        &lt;/forwarded&gt;
    &lt;/result&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq type='result' id='mamget1' from='coven@muclight.shakespeare.lit'/&gt;
</code></pre>
<h3 id="622-affiliation-change">6.2.2 Affiliation change</h3>
<p>Every archived affiliation change notification MUST include the <code>&lt;version/&gt;</code> element and MUST NOT contain the <code>&lt;prev-version/&gt;</code> element.</p>
<p><strong>Occupant queries MAM and receives an affiliation change notification</strong></p>
<pre><code class="language-xml">&lt;iq type='set' id='mamget2' to='muclight.shakespeare.lit'&gt;
    &lt;query xmlns='urn:xmpp:mam:1' queryid='f37' /&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;message id='aef2133' to='hag66@shakespeare.lit/pda'&gt;
    &lt;result xmlns='urn:xmpp:mam:1' queryid='f37' id='21482-98726-71623'&gt;
        &lt;forwarded xmlns='urn:xmpp:forward:0'&gt;
            &lt;delay xmlns='urn:xmpp:delay' stamp='2013-07-10T21:08:25Z'/&gt;
            &lt;message from=&quot;coven@muclight.shakespeare.lit&quot; id=&quot;notifid11&quot;&gt;
                &lt;x xmlns='urn:xmpp:muclight:0#affiliations'&gt;
                    &lt;version&gt;b9uf13h98f13&lt;/version&gt;
                    &lt;user affiliation='owner'&gt;hag66@shakespeare.lit&lt;/user&gt;
                    &lt;user affiliation='member'&gt;user1@shakespeare.lit&lt;/user&gt;
                    &lt;user affiliation='member'&gt;user2@shakespeare.lit&lt;/user&gt;
                &lt;/x&gt;
            &lt;/message&gt;
        &lt;/forwarded&gt;
    &lt;/result&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq type='result' id='mamget12'/&gt;
</code></pre>
<h3 id="623-room-creation">6.2.3 Room creation</h3>
<p>Room creation is archived as an affiliation change that includes ALL initial occupants (including the room creator).</p>
<h1 id="7-general-error-cases">7. General Error Cases</h1>
<h2 id="71-client-sends-an-unauthorized-stanza-to-a-room">7.1 Client sends an unauthorized stanza to a room</h2>
<p>If a client sends a stanza to the room, that it does not occupy, the service MUST reply with the 'item-not-found' error.</p>
<p><strong>Unauthorized IQ</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='member1'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user affiliation='member'&gt;hag66@shakespeare.lit&lt;/user&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq to='crone1@shakespeare.lit/desktop'
    id='member1'
    from='coven@muclight.shakespeare.lit'
    type='error'&gt;
    &lt;error type='cancel'&gt;
        &lt;item-not-found xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;/error&gt;
&lt;/iq&gt;
</code></pre>
<p><strong>Unauthorized message</strong></p>
<pre><code class="language-xml">&lt;message from='hag66@shakespeare.lit/pda'
         id='unauth2'
         to='coven@muclight.shakespeare.lit'
         type='groupchat'&gt;
    &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message to='hag66@shakespeare.lit/pda'
         id='unauth2'
         from='coven@muclight.shakespeare.lit'
         type='error'&gt;
    &lt;error type='cancel'&gt;
        &lt;item-not-found xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;/error&gt;
&lt;/message&gt;
</code></pre>
<h2 id="72-client-sends-a-presence-stanza-to-the-service">7.2 Client sends a &lt;presence/&gt; stanza to the service</h2>
<p>The service MUST ignore all <code>&lt;presence/&gt;</code> stanzas sent by the client.</p>
<h2 id="73-client-sends-an-invalid-stanza-to-the-service">7.3 Client sends an invalid stanza to the service</h2>
<p>If service receives an invalid stanza it MUST reply with a 'bad-request' error.</p>
<p><strong>Invalid IQ</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='bad1'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;item role='participant'&gt;hag66@shakespeare.lit&lt;/item&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq to='crone1@shakespeare.lit/desktop'
    id='bad1'
    from='coven@muclight.shakespeare.lit'
    type='error'&gt;
    &lt;error type='modify'&gt;
        &lt;bad-request xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;/error&gt;
&lt;/iq&gt;
</code></pre>
<p><strong>Invalid message</strong></p>
<pre><code class="language-xml">&lt;message from='hag66@shakespeare.lit/pda'
         id='bad2'
         to='coven@muclight.shakespeare.lit'
         type='chat'&gt;
    &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message to='hag66@shakespeare.lit/pda'
         id='bad2'
         from='coven@muclight.shakespeare.lit'
         type='error'&gt;
    &lt;error type='modify'&gt;
        &lt;bad-request xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;/error&gt;
&lt;/message&gt;
</code></pre>
<h2 id="74-request-sender-has-insufficient-privileges">7.4 Request sender has insufficient privileges</h2>
<p>If the request sender does not have sufficient privileges (but is a room occupant),
the service MUST reply with a 'not-allowed' error.</p>
<p>It occurs in the following cases:</p>
<ul>
<li>A member tries to change the configuration but the service is not configured to allow it.
  It does not apply to the subject change,
  although it has to be performed by sending <code>&lt;message/&gt;</code> with <code>&lt;subject/&gt;</code>,
  not configuration <code>&lt;iq/&gt;</code>.</li>
<li>A member tries to change anyone's affiliation to 'none' or 'owner'.</li>
<li>A member tries to change someone's affiliation to 'member' but the service is not configured to allow it.</li>
</ul>
<p><strong>Prohibited IQ</strong></p>
<pre><code class="language-xml">&lt;iq from='minion@shakespeare.lit/desktop'
    id='privileges1'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='urn:xmpp:muclight:0#affiliations'&gt;
        &lt;user role='owner'&gt;minion@shakespeare.lit&lt;/user&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq to='minion@shakespeare.lit/desktop'
    id='privileges1'
    from='coven@muclight.shakespeare.lit'
    type='error'&gt;
    &lt;error type='cancel'&gt;
        &lt;not-allowed xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;/error&gt;
&lt;/iq&gt;
</code></pre>
<h1 id="8-implementation-notes">8. Implementation Notes</h1>
<h2 id="81-xep-0045-mappings">8.1 XEP-0045 mappings</h2>
<p>Some client-side developers might choose to use existing XEP-0045 Multi-User Chat implementations
to interface with the new MUC Light.
There may be various reasons to do so: using a familiar protocol,
avoiding additional implementation, quick prototyping etc.
This section provides suggestions of mappings between XEP-0045 stanzas and the new ones described in this document.</p>
<p>Operations not described here SHOULD remain unmodified.</p>
<h3 id="811-discovering-the-features-supported-by-a-muc-service">8.1.1 Discovering the Features Supported by a MUC Service</h3>
<p>A Disco result MAY either include a new <code>&lt;feature/&gt;</code> element with an "http://jabber.org/protocol/muc" namespace
next to MUC Light one, or completely replace it, which is the RECOMMENDED behaviour.</p>
<p><strong>Returning a MUC namespace in Disco</strong></p>
<pre><code class="language-xml">&lt;iq from='hag66@shakespeare.lit/pda'
    id='lx09df27'
    to='muclight.shakespeare.lit'
    type='get'&gt;
    &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq from='muclight.shakespeare.lit'
    id='lx09df27'
    to='hag66@shakespeare.lit/pda'
    type='result'&gt;
    &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
        &lt;identity category='conference'
                  name='Shakespearean Chat Service'
                  type='text'/&gt;
        &lt;feature var='http://jabber.org/protocol/muc'/&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h3 id="812-discovering-occupied-rooms">8.1.2 Discovering Occupied Rooms</h3>
<p>The room list MUST NOT include room versions.</p>
<p><strong>Service Returns Disco Items Result</strong></p>
<pre><code class="language-xml">&lt;iq from='muclight.shakespeare.lit'
    id='zb8q41f4'
    to='hag66@shakespeare.lit/pda'
    type='result'&gt;
    &lt;query xmlns='http://jabber.org/protocol/disco#items'&gt;
        &lt;item jid='heath@muclight.shakespeare.lit'
              name='A Lonely Heath'/&gt;
        &lt;item jid='coven@muclight.shakespeare.lit'
              name='A Dark Cave'/&gt;
        &lt;item jid='forres@muclight.shakespeare.lit'
              name='The Palace'/&gt;
        &lt;item jid='inverness@muclight.shakespeare.lit'
              name='Macbeth&amp;apos;s Castle'/&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h3 id="813-changing-a-room-subject">8.1.3 Changing a room subject</h3>
<p>Instead of distributing the configuration change notifications,
the room MUST route <code>&lt;message/&gt;</code> with a <code>&lt;subject/&gt;</code> like a classic MUC would.
The client MUST send a classic message <code>&lt;subject/&gt;</code> as well.
The room SHOULD save a new subject in the room configuration.</p>
<p><strong>New subject is routed as an ordinary message</strong></p>
<pre><code class="language-xml">&lt;message from='hag66@shakespeare.lit/pda'
         id='compsubject'
         to='coven@muclight.shakespeare.lit'
         type='groupchat'&gt;
    &lt;subject&gt;To be or not to be?&lt;/subject&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='crone1@shakespeare.lit'
         type='groupchat'
         id='compsubject'&gt;
    &lt;subject&gt;To be or not to be?&lt;/subject&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         to='hag66@shakespeare.lit'
         type='groupchat'
         id='compsubject'&gt;
    &lt;subject&gt;To be or not to be?&lt;/subject&gt;
&lt;/message&gt;
</code></pre>
<h3 id="814-getting-a-room-configuration">8.1.4 Getting a room configuration</h3>
<p>Room configuration is encoded in a Data Form, that simulates the XEP-0045 config form.</p>
<p>Getting the room configuration does not benefit from room versioning.</p>
<p><strong>Requesting room configuration</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='comp-config'
    to='coven@muclight.shakespeare.lit'
    type='get'&gt;
    &lt;query xmlns='http://jabber.org/protocol/muc#owner'/&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq from='coven@muclight.shakespeare.lit'
    id='comp-config'
    to='crone1@shakespeare.lit/desktop'
    type='result'&gt;
    &lt;query xmlns='http://jabber.org/protocol/muc#owner'&gt;
        &lt;x xmlns='jabber:x:data' type='form'&gt;
            &lt;title&gt;Configuration for &quot;coven&quot; Room&lt;/title&gt;
            &lt;field type='hidden' var='FORM_TYPE'&gt;
                &lt;value&gt;http://jabber.org/protocol/muc#roomconfig&lt;/value&gt;
            &lt;/field&gt;
            &lt;field label='Natural-Language Room Name'
                   type='text-single'
                   var='muc#roomconfig_roomname'&gt;
                &lt;value&gt;A Dark Cave&lt;/value&gt;
            &lt;/field&gt;
            &lt;field label='Room subject'
                   type='text-single'
                   var='muc#roomconfig_subject'&gt;
                &lt;value&gt;To be or not to be?&lt;/value&gt;
            &lt;/field&gt;
        &lt;/x&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h3 id="815-requesting-a-user-list">8.1.5 Requesting a user list</h3>
<p>A user list is retrieved with an affiliation IQ get.</p>
<p><strong>Requesting affiliation list</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='comp-getaff'
    to='coven@muclight.shakespeare.lit' type='get'&gt;
    &lt;query xmlns='http://jabber.org/protocol/muc#admin'&gt;
        &lt;item affiliation='owner'/&gt;
        &lt;item affiliation='member'/&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq from='coven@muclight.shakespeare.lit'
    id='comp-getaff'
    to='crone1@shakespeare.lit/desktop'
    type='result'&gt;
    &lt;query xmlns='http://jabber.org/protocol/muc#admin'&gt;
        &lt;item affiliation='owner'
              jid='crone1@shakespeare.lit'
              nick='crone1@shakespeare.lit'
              role='moderator'/&gt;
        &lt;item affiliation='member'
              jid='hag66@shakespeare.lit'
              nick='hag66@shakespeare.lit'
              role='participant'/&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h3 id="816-requesting-room-information">8.1.6 Requesting room information</h3>
<p>There is no XEP-0045 equivalent for getting full room information.</p>
<h3 id="817-leaving-the-room">8.1.7 Leaving the room</h3>
<p>Leaving the room is performed by setting the own affiliation to 'none'.
The service uses <code>&lt;presence/&gt;</code> to notify all occupants (and former occupant) about the change.
<code>&lt;presence/&gt;</code> to the leaving occupant MUST be of the type "unavailable"
and MUST include a status code 321 (i.e. user leaving due to affiliation change).</p>
<p><strong>Leaving the room</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='comp-leave'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='http://jabber.org/protocol/muc#admin'&gt;
        &lt;item affiliation='none' jid='crone1@shakespeare.lit'/&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;presence from='coven@muclight.shakespeare.lit/crone1@shakespeare.lit'
          to='crone1@shakespeare.lit'
          type='unavailable'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;item affiliation='none' jid='crone1@shakespeare.lit/pda' role='none'/&gt;
        &lt;status code='321'/&gt;
    &lt;/x&gt;
&lt;/presence&gt;
</code></pre>
<pre><code class="language-xml">&lt;presence from='coven@muclight.shakespeare.lit/crone1@shakespeare.lit'
          to='hag66@shakespeare.lit/desktop'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;item affiliation='none' jid='crone1@shakespeare.lit/pda' role='none'/&gt;
        &lt;status code='321'/&gt;
    &lt;/x&gt;
&lt;/presence&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq from='coven@muclight.shakespeare.lit'
    id='comp-leave'
    to='crone1@shakespeare.lit/desktop'
    type='result'/&gt;
</code></pre>
<h3 id="818-blocking-functionality">8.1.8 Blocking functionality</h3>
<p>The blocking functionality uses a small subset of the Privacy Lists protocol.
Stanzas MUST be addressed to the sender's bare JID (the <code>to</code> attribute may be skipped).
The privacy list name MUST be equal to "urn:xmpp:muclight:0".
Obviously, this method won't work properly in XMPP Server Federation, because privacy stanzas are handled by sender's server and the MUC Light Blocking functionality is handled by a MUC Light service server.
As opposed to XEP-0016, it is allowed to send "delta" privacy lists.</p>
<h4 id="8181-request-blocking-list">8.1.8.1 Request blocking list</h4>
<p><strong>Retrieving blocking list</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop' type='get' id='comp-getlist'&gt;
    &lt;query xmlns='jabber:iq:privacy'&gt;
        &lt;list name='urn:xmpp:muclight:0'/&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq type='result' id='comp-getlist' to='crone1@shakespeare.lit/desktop'&gt;
    &lt;query xmlns='jabber:iq:privacy'&gt;
        &lt;list name='urn:xmpp:muclight:0'&gt;
            &lt;item type='jid'
                  value='coven@muclight.shakespeare.lit'
                  action='deny'
                  order='1'/&gt;
            &lt;item type='jid'
                  value='muclight.shakespeare.lit/hag66@shakespeare.lit'
                  action='deny'
                  order='1'/&gt;
        &lt;/list&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<h4 id="8182-blocking-a-room">8.1.8.2 Blocking a room</h4>
<p>In order to block a room, the client MUST deny a room bare JID in privacy list.</p>
<p><strong>Blocking a room</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop' type='set' id='comp-blockroom'&gt;
    &lt;query xmlns='jabber:iq:privacy'&gt;
        &lt;list name='urn:xmpp:muclight:0'&gt;
            &lt;item type='jid'
                  value='coven@muclight.shakespeare.lit'
                  action='deny'
                  order='1'/&gt;
        &lt;/list&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq type='result' id='comp-blockroom' to='crone1@shakespeare.lit/desktop' /&gt;
</code></pre>
<h4 id="8183-blocking-a-user">8.1.8.3 Blocking a user</h4>
<p>In order to block a room, the client MUST deny a service JID with user's bare JID in the resource.</p>
<p><strong>Blocking a user</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop' type='set' id='comp-blockuser'&gt;
    &lt;query xmlns='jabber:iq:privacy'&gt;
        &lt;list name='urn:xmpp:muclight:0'&gt;
            &lt;item type='jid'
                  value='muclight.shakespeare.lit/hag66@shakespeare.lit'
                  action='deny'
                  order='1'/&gt;
        &lt;/list&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq type='result' id='comp-blockuser' to='crone1@shakespeare.lit/desktop' /&gt;
</code></pre>
<h4 id="8184-unblocking">8.1.8.4 Unblocking</h4>
<p><strong>Unblocking</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop' type='get' id='comp-getlist'&gt;
    &lt;query xmlns='jabber:iq:privacy'&gt;
        &lt;list name='urn:xmpp:muclight:0'&gt;
            &lt;item type='jid'
                  value='coven@muclight.shakespeare.lit'
                  action='allow'
                  order='1'/&gt;
            &lt;item type='jid'
                  value='muclight.shakespeare.lit/hag66@shakespeare.lit'
                  action='allow'
                  order='1'/&gt;
        &lt;/list&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq type='result' id='comp-getlist' to='crone1@shakespeare.lit/desktop' /&gt;
</code></pre>
<h4 id="819-creating-a-room">8.1.9 Creating a room</h4>
<p>The room is created in a standard XEP-0045 way. Client MUST use a nick equal to their own bare JID.</p>
<p>Compatibility mode MUST NOT support a unique room name generation.</p>
<p><strong>Creating a room</strong></p>
<pre><code class="language-xml">&lt;presence from='crone1@shakespeare.lit/desktop'
          to='coven@muclight.shakespeare.lit/crone1@shakespeare.lit'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc'/&gt;
&lt;/presence&gt;
</code></pre>
<pre><code class="language-xml">&lt;presence from='coven@chat.shakespeare.lit/crone1@shakespeare.lit'
          to='crone1@shakespeare.lit/desktop'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;item affiliation='owner' role='moderator'/&gt;
        &lt;status code='110'/&gt;
        &lt;status code='201'/&gt;
    &lt;/x&gt;
&lt;/presence&gt;
</code></pre>
<h4 id="8191-room-already-exists">8.1.9.1 Room already exists</h4>
<p>If the client attempts to create a room that is already used, it will
receive an error <code>&lt;presence/&gt;</code> informing that registration is required
(like in the case of members-only rooms in XEP-0045).</p>
<p><strong>Creating a room</strong></p>
<pre><code class="language-xml">&lt;presence from='coven@muclight.shakespeare.lit/crone1@shakespeare.lit'
          to='crone1@shakespeare.lit/desktop'
          type='error'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc'/&gt;
    &lt;error by='coven@muclight.shakespeare.lit' type='auth'&gt;
        &lt;registration-required xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;/error&gt;
&lt;/presence&gt;
</code></pre>
<h4 id="8110-destroying-the-room">8.1.10 Destroying the room</h4>
<p>A classic XEP-0045 method is used but the service SHOULD NOT forward reason and alternate venue JID.</p>
<p><strong>Destroying the room</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='begone'
    to='heath@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='http://jabber.org/protocol/muc#owner'&gt;
        &lt;destroy jid='coven@muclight.shakespare.lit'&gt;
            &lt;reason&gt;Some reason.&lt;/reason&gt;
        &lt;/destroy&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;presence from='heath@chat.shakespeare.lit/crone1@shakespeare.lit'
    to='crone1@shakespeare.lit/desktop' type='unavailable'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;item affiliation='none' role='none'/&gt;
        &lt;destroy /&gt;
    &lt;/x&gt;
&lt;/presence&gt;
</code></pre>
<pre><code class="language-xml">&lt;presence
    from='heath@chat.shakespeare.lit/wiccarocks@shakespeare.lit'
    to='wiccarocks@shakespeare.lit/laptop' type='unavailable'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;item affiliation='none' role='none'/&gt;
        &lt;destroy /&gt;
    &lt;/x&gt;
&lt;/presence&gt;
</code></pre>
<pre><code class="language-xml">&lt;presence
    from='heath@chat.shakespeare.lit/hag66@shakespeare.lit'
    to='hag66@shakespeare.lit/pda'
    type='unavailable'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;item affiliation='none' role='none'/&gt;
        &lt;destroy /&gt;
    &lt;/x&gt;
&lt;/presence&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq from='heath@chat.shakespeare.lit'
    id='begone'
    to='crone1@shakespeare.lit/desktop'
    type='result'/&gt;
</code></pre>
<h4 id="8111-setting-room-configuration">8.1.11 Setting room configuration</h4>
<p>Room occupants can use a standard XEP-0045 configuration modification method. The service MUST broadcast only the notification about the configuration change with a status code 104, so every occupant can retrieve the new room configuration in a separate request. The client is allowed to send a config delta in a form.</p>
<p><strong>Setting room configuration</strong></p>
<pre><code class="language-xml">&lt;iq to='coven@muclight.shakespeare.lit'
    id='comp-setconfig'
    from='crone1@shakespeare.lit/desktop'
    type='set'&gt;
    &lt;query xmlns='http://jabber.org/protocol/muc#owner'&gt;
        &lt;x xmlns='jabber:x:data' type='form'&gt;
            &lt;field type='hidden' var='FORM_TYPE'&gt;
                &lt;value&gt;http://jabber.org/protocol/muc#roomconfig&lt;/value&gt;
            &lt;/field&gt;
            &lt;field label='Natural-Language Room Name'
                   type='text-single'
                   var='muc#roomconfig_roomname'&gt;
                &lt;value&gt;A Darker Cave&lt;/value&gt;
            &lt;/field&gt;
            &lt;field label='Room subject'
                   type='text-single'
                   var='muc#roomconfig_subject'&gt;
                &lt;value&gt;To be!&lt;/value&gt;
            &lt;/field&gt;
        &lt;/x&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         id='comp-confchange'
         to='crone1@shakespeare.lit/desktop'
         type='groupchat'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;status code='104'/&gt;
    &lt;/x&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         id='comp-confchange'
         to='crone2@shakespeare.lit/desktop'
         type='groupchat'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;status code='104'/&gt;
    &lt;/x&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq from='coven@muclight.shakespeare.lit'
    id='comp-setconfig'
    to='crone1@shakespeare.lit/desktop'
    type='result'/&gt;
</code></pre>
<h3 id="8112-changing-occupant-list">8.1.12 Changing occupant list</h3>
<p>The service MUST send an affiliation change notification to all participants.
Leaving users MUST NOT receive any information except for their own "none" affiliation.
New users MUST receive an invitation message.</p>
<p><strong>Changing occupant list</strong></p>
<pre><code class="language-xml">&lt;iq from='crone1@shakespeare.lit/desktop'
    id='comp-setaff'
    to='coven@muclight.shakespeare.lit'
    type='set'&gt;
    &lt;query xmlns='http://jabber.org/protocol/muc#admin'&gt;
        &lt;item affiliation='none' jid='hag66@shakespeare.lit'/&gt;
        &lt;item affiliation='member' jid='hecate@shakespeare.lit'/&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</code></pre>
<pre><code class="language-xml">&lt;presence from='coven@chat.shakespeare.lit/hag66@shakespeare.lit'
          to='hag66@shakespeare.lit'
          type='unavailable'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;item affiliation='none' jid='hag66@shakespeare.lit' role='none'/&gt;
        &lt;status code='321'/&gt;
    &lt;/x&gt;
&lt;/presence&gt;
</code></pre>
<pre><code class="language-xml">&lt;message from='coven@muclight.shakespeare.lit'
         id='comp-invite0'
         to='hecate@shakespeare.lit'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;invite from='crone1@shakespeare.lit'/&gt;
    &lt;/x&gt;
&lt;/message&gt;
</code></pre>
<pre><code class="language-xml">&lt;presence from='coven@chat.shakespeare.lit/hag66@shakespeare.lit'
          to='crone1@shakespeare.lit'
          type='unavailable'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;item affiliation='none' jid='hag66@shakespeare.lit' role='none'/&gt;
        &lt;status code='321'/&gt;
    &lt;/x&gt;
&lt;/presence&gt;
</code></pre>
<pre><code class="language-xml">&lt;presence from='coven@chat.shakespeare.lit/hecate@shakespeare.lit'
          to='crone1@shakespeare.lit'&gt;
    &lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;
        &lt;item affiliation='member'
              jid='hecate@shakespeare.lit'
              role='participant'
              nick='hecate@shakespeare.lit'/&gt;
    &lt;/x&gt;
&lt;/presence&gt;
</code></pre>
<pre><code class="language-xml">&lt;iq from='coven@muclight.shakespeare.lit'
    id='comp-setaff'
    to='crone1@shakespeare.lit/desktop'
    type='result'/&gt;
</code></pre>
<h2 id="82-service-limits-and-configuration">8.2 Service limits and configuration</h2>
<p>The MUC Light service may be abused by a malicious users,
e.g. due to replicating a single message for every room occupant.
The list below contains suggested configurable limits that SHOULD be implemented.</p>
<p>The service features that might vary depending on a specific application are included as well.</p>
<ul>
<li>Maximum number of rooms the user occupies.</li>
<li>Blocking feature enabled/disabled.</li>
<li>XEP-0045 compatibility mode enabled/disabled.</li>
<li>Room creator's initial affiliation: owner/member.</li>
<li>Room configuration may be changed by owner/occupants.</li>
<li>New members can be invited by owner/occupants.</li>
<li>Maximal room size.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../token-reconnection/" class="btn btn-neutral float-right" title="Token-based reconnection">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../authentication-backends/PKI-authentication-module/" class="btn btn-neutral" title="PKI Authentication Module"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../../authentication-backends/PKI-authentication-module/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../token-reconnection/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
